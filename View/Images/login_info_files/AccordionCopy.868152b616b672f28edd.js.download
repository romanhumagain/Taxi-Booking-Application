(window.webpackJsonp=window.webpackJsonp||[]).push([[23,34,59],{1144:function(t,e,o){var content=o(1646);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(9).default)("7a7720b6",content,!0,{sourceMap:!1})},1145:function(t,e,o){var content=o(1648);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(9).default)("74419f2c",content,!0,{sourceMap:!1})},1645:function(t,e,o){"use strict";o(1144)},1646:function(t,e,o){var n=o(8)((function(i){return i[1]}));n.push([t.i,".app-accordion2__copy-menu{--menu-min-width:140px}.app-accordion2__copy-menu-item{--icon-size:16px}.app-accordion2__copy-menu-item.i8-menu-item_disabled .i8-icon>svg{filter:invert(67%) sepia(0) saturate(57%) hue-rotate(172deg) brightness(93%) contrast(86%)}",""]),n.locals={},t.exports=n},1647:function(t,e,o){"use strict";o(1145)},1648:function(t,e,o){var n=o(8)((function(i){return i[1]}));n.push([t.i,".app-accordion2__copy-btn_copied[data-v-37d5a64d]{--button-color:var(--copy-text-button-copied-color,var(--c-green_500))}",""]),n.locals={},t.exports=n},1781:function(t,e,o){"use strict";o.r(e);var n=o(12),c=o(16),r=o(10),l=o(763),d=o(817),f=o(862),h=o(90),y=o(814),I=o(846),v=o(841);var m={name:"AccordionCopy",components:{I8Button:c.I8Button,I8Menu:d.a,I8MenuItem:f.a,I8Loader:c.I8Loader},props:{color:{type:String,default:void 0},fetchSvgFunc:{type:Function,default:()=>{}}},data:()=>({iconsLicense:!1,copied:!1,debouncedSetCopiedFalse:()=>{},svgLoading:!1}),computed:{...Object(n.e)({user:t=>t.auth.user,fullIcon:t=>t.icon.fullIcon,selectedIcon:t=>t.icon.selectedIcon,colorGradient:t=>t.filters.colorGradient,projectId:t=>t.icon.accordion.project.id}),...Object(n.c)("icon",["fullIconLoading","hasSvgFormat"]),url(){return this.selectedIcon.url||this.fullIcon.url}},watch:{"user.allowances":{immediate:!0,deep:!0,handler(t){t&&t.length?this.iconsLicense=!!t.find((t=>"icon"===t.resource)):this.iconsLicense=!1}}},mounted(){this.debouncedSetCopiedFalse=Object(r.debounce)((()=>{this.copied=!1}),3e3)},methods:{...Object(n.b)("icon",["extendFullIcon"]),...Object(n.b)(["fillUserInfo"]),copyText(text){this.$copyText(text).then((()=>{this.copied=!0,this.debouncedSetCopiedFalse.apply(this)}),(t=>{console.error(t)}))},copyLink(){this.copyText(window.location.origin+this.url),this.$refs.copyMenu.hide()},copyPng(){try{var t,e;this.projectId&&Object(I.projectHasActiveEffects)(this.projectId)&&this.extendFullIcon({svgEffect:Object(l.getSVG)(this.projectId)}),Object(v.a)(this.$store,this).downloadIcon(this.fullIconLoading?this.selectedIcon:this.fullIcon,{color:this.color,format:"png",size:100,userLicense:this.iconsLicense},null===(t=this.user)||void 0===t?void 0:t.email,(null===(e=this.user)||void 0===e?void 0:e.publicApiKey)||"").then((t=>{navigator.clipboard.write([new ClipboardItem({[t.data.type]:t.data})]).then((()=>{this.copied=!0,this.debouncedSetCopiedFalse.apply(this)}))}))}catch(t){console.error(t)}this.$refs.copyMenu.hide()},async copySvgCode(){if(this.iconsLicense||this.fullIcon.free){this.svgLoading=!0,this.fullIcon.svg?this.projectId&&Object(I.projectHasActiveEffects)(this.projectId)&&await this.extendFullIcon({svgEffect:Object(l.getSVG)(this.projectId)}):await this.fetchSvgFunc();try{const t=Object(y.m)({...this.fullIcon,color:this.color,colorGradient:this.colorGradient},100).result;await Object(h.d)(this.selectedIcon.id,this.user)||(await Object(v.a)(this.$store,this).buyIcon(this.fullIcon,this.user,this.iconsLicense),this.fillUserInfo().then((()=>{}))),this.copyText(t)}catch(t){this.$notify({title:"SVG Code is not available",type:"error",delay:5e3}),console.error(t)}this.svgLoading=!1,this.$refs.copyMenu.hide()}else this.$emit("open"),this.$refs.copyMenu.hide()},updateRecents(){Object(I.projectHasActiveEffects)(this.projectId)&&Object(I.updateRecents)(this.projectId,this.selectedIcon.pngSize)}}},O=(o(1645),o(1647),o(6)),component=Object(O.a)(m,(function(){var t=this,e=t._self._c;return e("I8Menu",{ref:"copyMenu",attrs:{"popup-side":"bottom","menu-offset":20,"centered-menu-position":!0,"menu-classes":["app-accordion2__copy-menu"]},on:{show:t.updateRecents},scopedSlots:t._u([{key:"activator",fn:function(){return[e("I8Button",{class:["app-accordion2__copy-btn",{"app-accordion2__copy-btn_copied":t.copied}],attrs:{size:"large",type:"outline","data-accordion-btn--copy":""}},[t._v("\n      "+t._s(t.copied?"âœ“ "+t.$t("ICON.COMPONENTS.ACCORDION_V2.COPIED"):t.$t("ICON.COMPONENTS.ACCORDION_V2.COPY"))+"\n    ")])]},proxy:!0},{key:"default",fn:function(){return[e("I8MenuItem",{staticClass:"app-accordion2__copy-menu-item",attrs:{disabled:!t.url,"icon-family":"simpleSmall","icon-left":"link"},on:{click:t.copyLink}},[t._v("\n      "+t._s(t.$t("ICON.COMPONENTS.ACCORDION_V2.COPY_LINK"))+"\n    ")]),t._v(" "),e("I8MenuItem",{staticClass:"app-accordion2__copy-menu-item",on:{click:t.copyPng},scopedSlots:t._u([{key:"iconLeft",fn:function(){return[e("div",{staticClass:"i8-icon i8-menu-item__icon i8-menu-item__icon_left",domProps:{innerHTML:t._s(t.$icons.image)}})]},proxy:!0},{key:"default",fn:function(){return[t._v("\n        "+t._s("PNG")+"\n      ")]},proxy:!0}])}),t._v(" "),t.hasSvgFormat?e("I8MenuItem",{staticClass:"app-accordion2__copy-menu-item",attrs:{disabled:t.svgLoading||t.fullIconLoading},on:{click:t.copySvgCode},scopedSlots:t._u([{key:"iconLeft",fn:function(){return[t.svgLoading?[e("I8Loader",{staticClass:"i8-icon i8-menu-item__icon i8-menu-item__icon_left",attrs:{size:16}})]:[e("div",{staticClass:"i8-icon i8-menu-item__icon i8-menu-item__icon_left",domProps:{innerHTML:t._s(t.$icons.code)}})]]},proxy:!0},{key:"default",fn:function(){return[t._v("\n        "+t._s(t.$t("ICON.COMPONENTS.ACCORDION_V2.COPY_SVG_CODE"))+"\n      ")]},proxy:!0}],null,!1,130477278)}):t._e()]},proxy:!0}])})}),[],!1,null,"37d5a64d",null);e.default=component.exports},800:function(t,e,o){"use strict";o.d(e,"h",(function(){return c})),o.d(e,"e",(function(){return l})),o.d(e,"c",(function(){return d})),o.d(e,"f",(function(){return y})),o.d(e,"d",(function(){return I})),o.d(e,"g",(function(){return v})),o.d(e,"b",(function(){return h})),o.d(e,"a",(function(){return f}));const n="I8_Recents",c={recents:[]};function r(t){const e=localStorage.getItem("I8_Tool"+t);if(e)try{return JSON.parse(e)}catch{console.warn(`Could not parse saved settings for "${t}" effect`)}return null}function l(){const t=localStorage.getItem(n);if(t)try{return void(c.recents=JSON.parse(t))}catch{console.warn("Could not parse recent settings")}c.recents=[]}function d(t,e,o){try{const{isMulticolored:l,iconSize:d}=o,f={id:t,iconSize:d,data:{}};e.forEach((t=>{const e=t.replace(/^\w/,(t=>t.toUpperCase()));if("Recolor"===e){const t=r(e)||{};l||(f.data[e]={color:t.color})}else f.data[e]=r(e)}));const h=c.recents.findIndex((e=>e.id===t));-1!==h?(c.recents.splice(h,1),c.recents.unshift(f)):(c.recents.length>5&&(c.recents.splice(-5),c.recents.unshift(f)),c.recents.length<5?c.recents.unshift(f):5===c.recents.length&&(c.recents.pop(),c.recents.unshift(f))),localStorage.setItem(n,JSON.stringify(c.recents))}catch(t){console.error("Could not save recents\n",t)}}const f={Recolor:"Recolor",Background:"Background",Padding:"Padding",Position:"Position",Rotation:"Rotation",Text:"Text",Stroke:"Stroke",Overlay:"Overlay",Shape:"Shape"},h={...f,StrokeIcon:"StrokeIcon",StrokeText:"StrokeText",StrokeOverlay:"StrokeOverlay"};function y(t,e){const o={...t.data.Stroke},n=t.iconSize/e,c=1e-5;return o.iconWidth=o.iconWidth*n+c,o.textWidth=o.textWidth*n+c,o.overlayWidth=o.overlayWidth*n+c,o}async function I(t){const{recent:e,effectKey:n,projectId:c,platform:r,iconSize:l,platforms:d}=t,{loadSettings:h}=await o(843)(`./${n.toLowerCase()}`);try{switch(n){case f.Text:{const t="https://maxst.icons8.com/vue-static/icon/effects/fonts/";await h(c,e.data[n],t);break}case f.Overlay:await h(c,e.data[n],r,d);break;case f.Stroke:await h(c,y(e,l));break;default:await h(c,e.data[n])}}catch(t){console.error(`Could not load selected recent settings for "${n}":\n`,t)}}function v(t,e){return`https://maxcdn.icons8.com/pack/iconizer/icons/${"user"===t?"ios11":t}/${e}`}},843:function(t,e,o){var map={"./background":[794,18],"./background.js":[794,18],"./overlay":[789,15],"./overlay.js":[789,15],"./padding":[793,19],"./padding.js":[793,19],"./position":[792,20],"./position.js":[792,20],"./recolor":[777],"./recolor.js":[777],"./rotation":[791,21],"./rotation.js":[791,21],"./shape":[788,17],"./shape.js":[788,17],"./stroke":[771,22],"./stroke.js":[771,22],"./text":[790,16],"./text.js":[790,16]};function n(t){if(!o.o(map,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=map[t],n=e[0];return Promise.all(e.slice(1).map(o.e)).then((function(){return o(n)}))}n.keys=function(){return Object.keys(map)},n.id=843,t.exports=n},844:function(t,e){},845:function(t,e){},846:function(t,e,o){"use strict";o.r(e),o.d(e,"projectHasActiveEffects",(function(){return d})),o.d(e,"updateRecents",(function(){return f})),o.d(e,"brightnessByColor",(function(){return h})),o.d(e,"recolorMonochromeIcon",(function(){return y})),o.d(e,"recolorNolanIcon",(function(){return I})),o.d(e,"toLowerHex6",(function(){return v})),o.d(e,"isNotRecolored",(function(){return m})),o.d(e,"isRecoloredByGradient",(function(){return O})),o.d(e,"addDataAttrs",(function(){return _}));var n=o(763),c=o(777),r=o(914),l=o(800);function d(t,e){if(void 0===e&&(e={gradient:void 0,color:void 0}),!t)return!1;const o=Object(n.getProject)(t).effects,c=Object.keys(o).filter((t=>o[t].active));if(!c.length)return!1;if(1===c.length&&"recolor"===c[0]){const t=o.recolor.controls.palette,n=Object.keys(t);if(1===n.length){if(e.color&&v(t[n[0]].color)===v(e.color))return!1}else if(e.gradient){if(O(t,e.gradient))return!1}}return!0}function f(t,e){const o=Object(n.getProject)(t);if(!o)return;o.effects.recolor||Object(c.init)(t);const r=o.effects.recolor.controls.palette,d=Object.keys(r).length>1,f=Object.keys(o.effects).filter((t=>{if("stroke"===t){const e=o.effects[t],n=o.effects.overlay&&e.overlay.width,c=o.effects.text&&e.text.width;return e.active&&(e.icon.width||c||n)}return o.effects[t].active}));if(f.length){const o={isMulticolored:d,iconSize:e};Object(l.c)(t,f,o)}}function h(t){const e=t.startsWith("#"),o=t.startsWith("rgb");let n,g,b;if(e){const e=7===t.length,o=t.slice(1).match(e?/(\S{2})/g:/(\S{1})/g);o&&(n=parseInt(o[0]+(e?"":o[0]),16),g=parseInt(o[1]+(e?"":o[1]),16),b=parseInt(o[2]+(e?"":o[2]),16))}if(o){const e=t.match(/(\d+){3}/g);e&&(n=e[0],g=e[1],b=e[2])}if(void 0!==n)return(299*n+587*g+114*b)/1e3/255}function y(t,e){if(!e||!t)return console.error("Incorrect arguments in recolorMonochromeIcon"),!1;try{const o=Object(n.getProject)(t);o.effects.recolor||Object(c.init)(t);const r=o.effects.recolor.controls.palette;if(1===Object.keys(r).length){const o=Object.keys(r)[0];return Object(c.recolorPalette)(t,o,e),Object(c.recolorNodes)(t,o,e),!0}return!1}catch(t){return console.error(t),!1}}function I(t,e){if(!t||!e.start||!e.end)return console.error("Incorrect arguments in recolorNolanIcon"),!1;try{const o=Object(n.getProject)(t);o.effects.recolor||Object(c.init)(t);const l=o.effects.recolor.controls.palette,d=o.effects.recolor.nodes,f=[];for(const t in l){const e=d[t][0].index;if("number"==typeof e){const o=l[t].initColor;f.push({color:o,stopIndex:e,lightness:h(o),key:t})}}f.sort(((a,b)=>a.lightness-b.lightness));const y=(e,o)=>{Object(c.recolorPalette)(t,e,o),Object(c.recolorNodes)(t,e,o)};for(let i=0;i<f.length;i++)i<2?0===f[i].stopIndex?y(f[i].key,e.start):1===f[i].stopIndex&&y(f[i].key,e.end):(e.additional||(e.additional={start:Object(r.a)(22,e.start).hex,end:Object(r.a)(22,e.end).hex}),0===f[i].stopIndex?y(f[i].key,e.additional.start):1===f[i].stopIndex&&y(f[i].key,e.additional.end));return!0}catch(t){return console.error(t),!1}}function v(t){return t.length>7&&t.endsWith("FF")?t.toLowerCase().slice(0,-2):t.toLowerCase()}function m(t){return!Object.keys(t).some((e=>!(v(t[e].color)===t[e].initColor)))}function O(t,e){var o,n;if(!e||!e.start||!e.end)return console.error("Incorrect arguments in isRecoloredByGradient"),!1;const c=[e.start.toLowerCase(),e.end.toLowerCase(),null===(o=e.additional)||void 0===o?void 0:o.start.toLowerCase(),null===(n=e.additional)||void 0===n?void 0:n.end.toLowerCase()];return!Object.keys(t).some((e=>{const o=v(t[e].color);return!c.includes(o)}))}function _(text){const{activeEffect:t}=this.$store.state.icon.accordion;return{[`data-editor-btn--${{AddSquare:"square",AddSubicon:"subicon",AddStroke:"stroke",AddText:"text",EditRotation:"rotation",EditPosition:"position",EditPadding:"padding",EditBackgroundColor:"bg-color",EditColor:"color"}[t]}-${text}`]:""}}}}]);
//# sourceMappingURL=AccordionCopy.868152b616b672f28edd.js.map